{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"h1\", null, \"FHIR Web App\", -1 /* HOISTED */);\nconst _hoisted_2 = {\n  key: 0\n};\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"h2\", null, \"Patients\", -1 /* HOISTED */);\nconst _hoisted_4 = {\n  ref: \"d3Container\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", null, [_hoisted_1, _createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.fetchPatients && $options.fetchPatients(...args))\n  }, \"Fetch Patients\"), $data.patients.length ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_hoisted_3, _createElementVNode(\"p\", null, _toDisplayString($data.patients), 1 /* TEXT */), _createElementVNode(\"ul\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.patients, patient => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: patient.id\n    }, _toDisplayString(patient.resource.name[0].given[0]), 1 /* TEXT */);\n  }), 128 /* KEYED_FRAGMENT */))])])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_4, null, 512 /* NEED_PATCH */)]);\n}","map":{"version":3,"names":["_createElementVNode","key","ref","_createElementBlock","_hoisted_1","onClick","_cache","args","$options","fetchPatients","$data","patients","length","_hoisted_2","_hoisted_3","_toDisplayString","_Fragment","_renderList","patient","id","resource","name","given","_createCommentVNode","_hoisted_4"],"sources":["C:\\xampp\\htdocs\\fhir_web_app\\fhir_web_app_frontend\\src\\App.vue"],"sourcesContent":["<template>\n  <div>\n    <h1>FHIR Web App</h1>\n    <button @click=\"fetchPatients\">Fetch Patients</button>\n    <div v-if=\"patients.length\">\n      <h2>Patients</h2>\n      <p>{{patients}}</p>\n      <ul>\n        <li v-for=\"patient in patients\" :key=\"patient.id\">{{ patient.resource.name[0].given[0] }}</li>\n      </ul>\n    </div>\n    <div ref=\"d3Container\"></div>\n  </div>\n</template>\n<script>\nimport axios from \"axios\";\nimport * as d3 from \"d3\";\n\nexport default {\n  mounted() {\n    this.fetchPatients();\n  },\n  data() {\n    return {\n      patients: [],\n      searchId: \"\",\n    };\n  },\n  methods: {\n\n    async fetchPatients() {\n      try {\n     await axios.get('http://localhost:3000/api/patients')\n        .then(success =>{\n          console.log(\"Successful request to FHIR server\");\n          console.log(success);\n           this.patients = success.data.entry;\n            this.renderD3Charts();\n        })\n        .catch(error =>{\n          console.log(error);\n          alert(`Error! ${error}`);\n\n        });\n\n\n      } catch (error) {\n        console.error('Error fetching patients:', error.message);\n      }\n    },\n\n      // axios\n      //   .get(\"http://localhost:3000/api/patients\")\n      //   .then((response) => {\n      //     this.patients = response.data.entry.map((entry) => entry.resource);\n      //     console.log(\"Successfully fetched data:\", this.patients);\n      //     this.renderD3Charts();\n      //   })\n      //   .catch((error) => console.error(\"Error fetching data:\", error));\n    \n    renderD3Charts() {\n    //  this.renderLineChart();\n    //  this.renderPieChart();\n      this.renderBarChart();\n    },\n    renderLineChart() {\n      const svgLine = d3.select(this.$refs.d3Container).append(\"svg\").attr(\"width\", 400).attr(\"height\", 200);\n\n      svgLine\n        .append(\"path\")\n        .datum(this.patients)\n        .attr(\"fill\", \"none\")\n        .attr(\"stroke\", \"steelblue\")\n        .attr(\"stroke-width\", 2)\n        .attr(\n          \"d\",\n          d3\n            .line()\n            .x((d, i) => i * 80)\n            .y((d) => parseInt(d.birthDate.split(\"-\")[2]) * 2)\n        );\n    },\n    renderPieChart() {\n      const svgPie = d3.select(this.$refs.d3Container).append(\"svg\").attr(\"width\", 200).attr(\"height\", 200);\n\n      const pie = d3.pie();\n      const arc = d3.arc().innerRadius(0).outerRadius(100);\n\n      svgPie\n        .selectAll(\"path\")\n        .data(pie(this.patients.map(() => 1)))\n        .enter()\n        .append(\"path\")\n        .attr(\"d\", arc)\n        .attr(\"fill\", (d, i) => d3.schemeCategory10[i]);\n    },\n    renderBarChart() {\n      const svgBar = d3.select(this.$refs.d3Container).append(\"svg\").attr(\"width\", 400).attr(\"height\", 200);\n\n      svgBar\n        .selectAll(\"rect\")\n        .data(this.patients)\n        .enter()\n        .append(\"rect\")\n        .attr(\"x\", (d, i) => i * 80)\n        .attr(\"y\", (d) => parseInt(d.birthDate.split(\"-\")[2]) * 2)\n        .attr(\"width\", 50)\n        .attr(\"height\", (d) => parseInt(d.birthDate.split(\"-\")[2]) * 5)\n        .attr(\"fill\", \"steelblue\");\n    },\n  },\n};\n</script>\n<style>\n/* Add your styles here */\n</style>"],"mappings":";gCAEIA,mBAAA,CAAqB,YAAjB,cAAY;;EAFpBC,GAAA;AAAA;gCAKMD,mBAAA,CAAiB,YAAb,UAAQ;;EAMTE,GAAG,EAAC;AAAa;;uBAVxBC,mBAAA,CAWM,cAVJC,UAAqB,EACrBJ,mBAAA,CAAsD;IAA7CK,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAC,aAAA,IAAAD,QAAA,CAAAC,aAAA,IAAAF,IAAA,CAAa;KAAE,gBAAc,GAClCG,KAAA,CAAAC,QAAQ,CAACC,MAAM,I,cAA1BT,mBAAA,CAMM,OAVVU,UAAA,GAKMC,UAAiB,EACjBd,mBAAA,CAAmB,WAAAe,gBAAA,CAAdL,KAAA,CAAAC,QAAQ,kBACbX,mBAAA,CAEK,c,kBADHG,mBAAA,CAA8Fa,SAAA,QARtGC,WAAA,CAQ8BP,KAAA,CAAAC,QAAQ,EAAnBO,OAAO;yBAAlBf,mBAAA,CAA8F;MAA7DF,GAAG,EAAEiB,OAAO,CAACC;wBAAOD,OAAO,CAACE,QAAQ,CAACC,IAAI,IAAIC,KAAK;wCAR3FC,mBAAA,gBAWIvB,mBAAA,CAA6B,OAA7BwB,UAA6B,8B"},"metadata":{},"sourceType":"module","externalDependencies":[]}