{"ast":null,"code":"import axios from \"axios\";\nimport * as d3 from \"d3\";\nexport default {\n  mounted() {\n    this.fetchPatients();\n  },\n  data() {\n    return {\n      patients: [],\n      searchId: \"\"\n    };\n  },\n  methods: {\n    async fetchPatients() {\n      try {\n        await axios.get(\"http://localhost:3000/api/patients\").then(success => {\n          console.log(\"Successful request to FHIR server\");\n          console.log(success);\n          this.patients = success.data.entry;\n          this.renderD3Charts();\n        }).catch(error => {\n          console.log(error);\n          alert(`Error! ${error}`);\n        });\n      } catch (error) {\n        console.error(\"Error fetching patients:\", error.message);\n      }\n    },\n    renderD3Charts() {\n      //  this.renderLineChart();\n      //  this.renderPieChart();\n      this.renderBarChart();\n    },\n    renderLineChart() {\n      const svgLine = d3.select(this.$refs.d3Container).append(\"svg\").attr(\"width\", 400).attr(\"height\", 200);\n      svgLine.append(\"path\").datum(this.patients).attr(\"fill\", \"none\").attr(\"stroke\", \"steelblue\").attr(\"stroke-width\", 2).attr(\"d\", d3.line().x((d, i) => i * 80).y(d => parseInt(d.birthDate.split(\"-\")[2]) * 2));\n    },\n    renderPieChart() {\n      const svgPie = d3.select(this.$refs.d3Container).append(\"svg\").attr(\"width\", 200).attr(\"height\", 200);\n      const pie = d3.pie();\n      const arc = d3.arc().innerRadius(0).outerRadius(100);\n      svgPie.selectAll(\"path\").data(pie(this.patients.map(() => 1))).enter().append(\"path\").attr(\"d\", arc).attr(\"fill\", (d, i) => d3.schemeCategory10[i]);\n    },\n    renderBarChart() {\n      var dataset = this.patients;\n      // var dataset = [5, 2, 3, 4, 5];\n      var svgWidth = 700,\n        svgHeight = 500,\n        barPadding = 2,\n        yGraphPadding = 20;\n      var xGraphPadding = 30;\n      var barWidth = svgWidth / dataset.length;\n      var svg = d3.select(this.$refs.d3BarChartContainer).append(\"svg\").attr(\"width\", svgWidth).attr(\"height\", svgHeight);\n      var yScale = d3.scaleLinear().domain([0, d3.max(this.patients.resource) + yGraphPadding]).range([0, svgHeight + yGraphPadding]);\n      var barChart = svg.selectAll(\"rect\").data(dataset).enter().append(\"rect\").attr(\"y\", function (d) {\n        return svgHeight - yScale(d);\n      }).attr(\"height\", function (d) {\n        return yScale(d) - yGraphPadding;\n      }).attr(\"width\", barWidth - barPadding).attr(\"transform\", function (d, i) {\n        var translate = [barWidth * i + xGraphPadding, 0];\n        return \"translate(\" + translate + \")\";\n      });\n      svg.selectAll(\"text\").data(dataset).enter().append(\"text\").text(function (d) {\n        return d;\n      }).attr(\"y\", function (d) {\n        return svgHeight - yScale(d) - 2;\n      }).attr(\"x\", function (d, i) {\n        return barWidth * i + xGraphPadding;\n      }).attr(\"fill\", \"red\");\n      yScale = d3.scaleLinear().domain([0, d3.max(dataset) + yGraphPadding]).range([svgHeight - yGraphPadding, 0]);\n      var xScale = d3.scaleLinear().domain([0, d3.max(dataset)]).range([0, svgWidth]);\n      var xAxis = d3.axisBottom().scale(xScale);\n      var yAxis = d3.axisLeft().scale(yScale);\n      svg.append(\"g\").attr(\"transform\", \"translate(\" + xGraphPadding + \", 0)\").call(yAxis);\n      var xAxisTranslate = svgHeight - 20;\n      svg.append(\"g\").attr(\"transform\", \"translate(\" + xGraphPadding + \", \" + xAxisTranslate + \")\").call(xAxis);\n      return barChart;\n    },\n    getYear(data) {\n      var year = 0;\n      if (data.birthDate) {\n        var date = new Date(data.birthDate);\n        year = date.getFullYear();\n      }\n      return year;\n    }\n  }\n};","map":{"version":3,"names":["axios","d3","mounted","fetchPatients","data","patients","searchId","methods","get","then","success","console","log","entry","renderD3Charts","catch","error","alert","message","renderBarChart","renderLineChart","svgLine","select","$refs","d3Container","append","attr","datum","line","x","d","i","y","parseInt","birthDate","split","renderPieChart","svgPie","pie","arc","innerRadius","outerRadius","selectAll","map","enter","schemeCategory10","dataset","svgWidth","svgHeight","barPadding","yGraphPadding","xGraphPadding","barWidth","length","svg","d3BarChartContainer","yScale","scaleLinear","domain","max","resource","range","barChart","translate","text","xScale","xAxis","axisBottom","scale","yAxis","axisLeft","call","xAxisTranslate","getYear","year","date","Date","getFullYear"],"sources":["C:\\xampp\\htdocs\\fhir_web_app\\fhir_web_app_frontend\\src\\App.vue"],"sourcesContent":["<template>\n  <div>\n    <h1>FHIR Web App</h1>\n    <button @click=\"fetchPatients\">Fetch Patients</button>\n    <div v-if=\"patients.length\">\n      <h2>Patients</h2>\n      <ul>\n        <li v-for=\"patient in patients\" :key=\"patient.id\">\n          {{ patient.resource.name[0].given[0] }}\n        </li>\n      </ul>\n    </div>\n    <div ref=\"d3Container\"></div>\n     <div ref=\"d3BarChartContainer\"></div>\n    \n  </div>\n</template>\n<script>\nimport axios from \"axios\";\nimport * as d3 from \"d3\";\n\nexport default {\n  mounted() {\n    this.fetchPatients();\n  },\n  data() {\n    return {\n      patients: [],\n      searchId: \"\",\n    };\n  },\n  methods: {\n    async fetchPatients() {\n      try {\n        await axios\n          .get(\"http://localhost:3000/api/patients\")\n          .then((success) => {\n            console.log(\"Successful request to FHIR server\");\n            console.log(success);\n            this.patients = success.data.entry;\n            this.renderD3Charts();\n          })\n          .catch((error) => {\n            console.log(error);\n            alert(`Error! ${error}`);\n          });\n      } catch (error) {\n        console.error(\"Error fetching patients:\", error.message);\n      }\n    },\n\n    renderD3Charts() {\n      //  this.renderLineChart();\n      //  this.renderPieChart();\n      this.renderBarChart();\n    },\n    renderLineChart() {\n      const svgLine = d3\n        .select(this.$refs.d3Container)\n        .append(\"svg\")\n        .attr(\"width\", 400)\n        .attr(\"height\", 200);\n\n      svgLine\n        .append(\"path\")\n        .datum(this.patients)\n        .attr(\"fill\", \"none\")\n        .attr(\"stroke\", \"steelblue\")\n        .attr(\"stroke-width\", 2)\n        .attr(\n          \"d\",\n          d3\n            .line()\n            .x((d, i) => i * 80)\n            .y((d) => parseInt(d.birthDate.split(\"-\")[2]) * 2)\n        );\n    },\n    renderPieChart() {\n      const svgPie = d3\n        .select(this.$refs.d3Container)\n        .append(\"svg\")\n        .attr(\"width\", 200)\n        .attr(\"height\", 200);\n\n      const pie = d3.pie();\n      const arc = d3.arc().innerRadius(0).outerRadius(100);\n\n      svgPie\n        .selectAll(\"path\")\n        .data(pie(this.patients.map(() => 1)))\n        .enter()\n        .append(\"path\")\n        .attr(\"d\", arc)\n        .attr(\"fill\", (d, i) => d3.schemeCategory10[i]);\n    },\n\n    renderBarChart() {\n      var dataset = this.patients\n        // var dataset = [5, 2, 3, 4, 5];\n      var svgWidth = 700,\n        svgHeight = 500,\n        barPadding = 2,\n        yGraphPadding = 20;\n       var xGraphPadding = 30;\n      var barWidth = svgWidth / dataset.length;\n\n      var svg = d3\n        .select(this.$refs.d3BarChartContainer)\n        .append(\"svg\")\n        .attr(\"width\", svgWidth)\n        .attr(\"height\", svgHeight);\n\n      var yScale = d3\n        .scaleLinear()\n        .domain([ 0 ,d3.max(this.patients.resource) + yGraphPadding])\n        .range([  0, svgHeight + yGraphPadding]);\n\n      var barChart = svg\n        .selectAll(\"rect\")\n        .data(dataset)\n        .enter()\n        .append(\"rect\")\n        .attr(\"y\", function (d) {\n          return svgHeight - yScale(d);\n        })\n        .attr(\"height\", function (d) {\n          return yScale(d) - yGraphPadding;\n        })\n        .attr(\"width\", barWidth - barPadding)\n        .attr(\"transform\", function (d, i) {\n          var translate = [(barWidth  * i) + xGraphPadding, 0];\n          return \"translate(\" + translate + \")\";\n        });\n      svg\n        .selectAll(\"text\")\n        .data(dataset)\n        .enter()\n        .append(\"text\")\n        .text(function (d) {\n          return d;\n        })\n        .attr(\"y\", function (d) {\n          return svgHeight - yScale(d) - 2 ;\n        })\n        .attr(\"x\", function (d, i) {\n          return ((barWidth) * i)+ xGraphPadding ;\n        })\n        .attr(\"fill\", \"red\");\n\n\n     yScale = d3\n        .scaleLinear()\n        .domain([0 ,d3.max(dataset) + yGraphPadding])\n        .range([svgHeight -yGraphPadding , 0]);\n\n      var xScale = d3\n        .scaleLinear()\n        .domain([0, d3.max(dataset)])\n        .range([0, svgWidth]);\n\n      var xAxis = d3.axisBottom().scale(xScale);\n\n      var yAxis = d3.axisLeft().scale(yScale);\n      svg.append(\"g\").attr(\"transform\", \"translate(\"+xGraphPadding+\", 0)\").call(yAxis);\n\n      var xAxisTranslate = svgHeight- 20;\n      svg\n        .append(\"g\")\n        .attr(\"transform\", \"translate(\"+xGraphPadding+\", \" + xAxisTranslate + \")\")\n        .call(xAxis);\n\n      return barChart;\n    \n    },\n\n    getYear(data){\n      var year = 0;\n         if(data.birthDate){\n            var date = new Date(data.birthDate);\n            year = date.getFullYear();\n         }\n\n         return year;\n    }\n  },\n};\n</script>\n<style>\n/* Add your styles here */\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}